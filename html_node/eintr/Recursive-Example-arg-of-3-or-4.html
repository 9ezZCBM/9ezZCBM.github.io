<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Recursive Example arg of 3 or 4 - Programming in Emacs Lisp</title>
<!--
This is an `Introduction to Programming in Emacs Lisp', for
people who are not programmers.

   Distributed with Emacs version 26.2.

   Copyright (C) 1990--1995, 1997, 2001--2019 Free Software
Foundation, Inc.



   Printed copies available from `https://shop.fsf.org/'. Published by:
     GNU Press,                        https://www.fsf.org/licensing/gnu-press/
     a division of the                 email: sales@fsf.org
     Free Software Foundation, Inc.    Tel: +1 (617) 542-5942
     51 Franklin Street, Fifth Floor   Fax: +1 (617) 542-2652
     Boston, MA 02110-1301 USA

   ISBN 1-882114-43-4

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; there being no Invariant Section, with the Front-Cover
     Texts being ``A GNU Manual'', and with the Back-Cover Texts as in
     (a) below.  A copy of the license is included in the section
     entitled ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Recursive-Example-arg-of-3-or-4"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Recursive-Example-arg-of-1-or-2.html#Recursive-Example-arg-of-1-or-2">Recursive Example arg of 1 or 2</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Recursive-triangle-function.html#Recursive-triangle-function">Recursive triangle function</a>

</div>

<h5 class="unnumberedsubsubsec">An argument of 3 or 4</h5>

<p>Suppose that <code>triangle-recursively</code> is called with an argument of
3.

     <dl>
<dt><i>Step 1 &nbsp;&nbsp;<!-- /@w --> Evaluate the do-again-test.</i><dd>
The <code>if</code> expression is evaluated first.  This is the do-again
test and returns false, so the else-part of the <code>if</code> expression
is evaluated.  (Note that in this example, the do-again-test causes
the function to call itself when it tests false, not when it tests
true.)

     <br><dt><i>Step 2 &nbsp;&nbsp;<!-- /@w --> Evaluate the innermost expression of the else-part.</i><dd>
The innermost expression of the else-part is evaluated, which decrements
3 to 2.  This is the next-step-expression.

     <br><dt><i>Step 3 &nbsp;&nbsp;<!-- /@w --> Evaluate the </i><code>triangle-recursively</code><i> function.</i><dd>
The number 2 is passed to the <code>triangle-recursively</code> function.

     <p>We already know what happens when Emacs evaluates <code>triangle-recursively</code> with
an argument of 2.  After going through the sequence of actions described
earlier, it returns a value of 3.  So that is what will happen here.

     <br><dt><i>Step 4 &nbsp;&nbsp;<!-- /@w --> Evaluate the addition.</i><dd>
3 will be passed as an argument to the addition and will be added to the
number with which the function was called, which is 3. 
</dl>

<p class="noindent">The value returned by the function as a whole will be 6.

   <p>Now that we know what will happen when <code>triangle-recursively</code> is
called with an argument of 3, it is evident what will happen if it is
called with an argument of 4:

   <blockquote>
In the recursive call, the evaluation of

<pre class="smallexample">     (triangle-recursively (1- 4))
</pre>
   <p class="noindent">will return the value of evaluating

<pre class="smallexample">     (triangle-recursively 3)
</pre>
   <p class="noindent">which is 6 and this value will be added to 4 by the addition in the
third line. 
</blockquote>

<p class="noindent">The value returned by the function as a whole will be 10.

   <p>Each time <code>triangle-recursively</code> is evaluated, it evaluates a
version of itself&mdash;a different instance of itself&mdash;with a smaller
argument, until the argument is small enough so that it does not
evaluate itself.

   <p>Note that this particular design for a recursive function
requires that operations be deferred.

   <p>Before <code>(triangle-recursively 7)</code> can calculate its answer, it
must call <code>(triangle-recursively 6)</code>; and before
<code>(triangle-recursively 6)</code> can calculate its answer, it must call
<code>(triangle-recursively 5)</code>; and so on.  That is to say, the
calculation that <code>(triangle-recursively 7)</code> makes must be
deferred until <code>(triangle-recursively 6)</code> makes its calculation;
and <code>(triangle-recursively 6)</code> must defer until
<code>(triangle-recursively 5)</code> completes; and so on.

   <p>If each of these instances of <code>triangle-recursively</code> are thought
of as different robots, the first robot must wait for the second to
complete its job, which must wait until the third completes, and so
on.

   <p>There is a way around this kind of waiting, which we will discuss in
<a href="No-Deferment.html#No-Deferment">Recursion without Deferments</a>.

   </body></html>

