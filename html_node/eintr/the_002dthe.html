<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>the-the - Programming in Emacs Lisp</title>
<!--
This is an `Introduction to Programming in Emacs Lisp', for
people who are not programmers.

   Distributed with Emacs version 26.2.

   Copyright (C) 1990--1995, 1997, 2001--2019 Free Software
Foundation, Inc.



   Printed copies available from `https://shop.fsf.org/'. Published by:
     GNU Press,                        https://www.fsf.org/licensing/gnu-press/
     a division of the                 email: sales@fsf.org
     Free Software Foundation, Inc.    Tel: +1 (617) 542-5942
     51 Franklin Street, Fifth Floor   Fax: +1 (617) 542-2652
     Boston, MA 02110-1301 USA

   ISBN 1-882114-43-4

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; there being no Invariant Section, with the Front-Cover
     Texts being ``A GNU Manual'', and with the Back-Cover Texts as in
     (a) below.  A copy of the license is included in the section
     entitled ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="the-the"></a>
<a name="the_002dthe"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Kill-Ring.html#Kill-Ring">Kill Ring</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Conclusion.html#Conclusion">Conclusion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>

</div>

<h2 class="appendix">Appendix A The <code>the-the</code> Function</h2>

<p><a name="index-the_002dthe-360"></a><a name="index-Duplicated-words-function-361"></a><a name="index-Words_002c-duplicated-362"></a>
Sometimes when you you write text, you duplicate words&mdash;as with &ldquo;you
you&rdquo; near the beginning of this sentence.  I find that most
frequently, I duplicate &ldquo;the&rdquo;; hence, I call the function for
detecting duplicated words, <code>the-the</code>.

   <p>As a first step, you could use the following regular expression to
search for duplicates:

<pre class="smallexample">     \\(\\w+[ \t\n]+\\)\\1
</pre>
   <p class="noindent">This regexp matches one or more word-constituent characters followed
by one or more spaces, tabs, or newlines.  However, it does not detect
duplicated words on different lines, since the ending of the first
word, the end of the line, is different from the ending of the second
word, a space.  (For more information about regular expressions, see
<a href="Regexp-Search.html#Regexp-Search">Regular Expression Searches</a>, as well as
<a href="../emacs/Regexps.html#Regexps">Syntax of Regular Expressions</a>, and <a href="../elisp/Regular-Expressions.html#Regular-Expressions">Regular Expressions</a>.)

   <p>You might try searching just for duplicated word-constituent
characters but that does not work since the pattern detects doubles
such as the two occurrences of &ldquo;th&rdquo; in &ldquo;with the&rdquo;.

   <p>Another possible regexp searches for word-constituent characters
followed by non-word-constituent characters, reduplicated.  Here,
&lsquo;<samp><span class="samp">\\w+</span></samp>&rsquo;<!-- /@w --> matches one or more word-constituent characters and
&lsquo;<samp><span class="samp">\\W*</span></samp>&rsquo;<!-- /@w --> matches zero or more non-word-constituent characters.

<pre class="smallexample">     \\(\\(\\w+\\)\\W*\\)\\1
</pre>
   <p class="noindent">Again, not useful.

   <p>Here is the pattern that I use.  It is not perfect, but good enough. 
&lsquo;<samp><span class="samp">\\b</span></samp>&rsquo;<!-- /@w --> matches the empty string, provided it is at the beginning
or end of a word; &lsquo;<samp><span class="samp">[^@&nbsp;\n\t]+</span></samp>&rsquo;<!-- /@w --> matches one or more occurrences of
any characters that are <em>not</em> an @-sign, space, newline, or tab.

<pre class="smallexample">     \\b\\([^@ \n\t]+\\)[ \n\t]+\\1\\b
</pre>
   <p>One can write more complicated expressions, but I found that this
expression is good enough, so I use it.

   <p>Here is the <code>the-the</code> function, as I include it in my
<samp><span class="file">.emacs</span></samp> file, along with a handy global key binding:

<pre class="smallexample">     (defun the-the ()
       "Search forward for for a duplicated word."
       (interactive)
       (message "Searching for for duplicated words ...")
       (push-mark)
       ;; This regexp is not perfect
       ;; but is fairly good over all:
       (if (re-search-forward
            "\\b\\([^@ \n\t]+\\)[ \n\t]+\\1\\b" nil 'move)
           (message "Found duplicated word.")
         (message "End of buffer")))
     
     ;; Bind 'the-the' to  C-c \
     (global-set-key "\C-c\\" 'the-the)
</pre>
   <pre class="sp">

</pre>
Here is test text:

<pre class="smallexample">     one two two three four five
     five six seven
</pre>
   <p>You can substitute the other regular expressions shown above in the
function definition and try each of them on this list.

   </body></html>

