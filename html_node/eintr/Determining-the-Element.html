<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Determining the Element - Programming in Emacs Lisp</title>
<!--
This is an `Introduction to Programming in Emacs Lisp', for
people who are not programmers.

   Distributed with Emacs version 26.2.

   Copyright (C) 1990--1995, 1997, 2001--2019 Free Software
Foundation, Inc.



   Printed copies available from `https://shop.fsf.org/'. Published by:
     GNU Press,                        https://www.fsf.org/licensing/gnu-press/
     a division of the                 email: sales@fsf.org
     Free Software Foundation, Inc.    Tel: +1 (617) 542-5942
     51 Franklin Street, Fifth Floor   Fax: +1 (617) 542-2652
     Boston, MA 02110-1301 USA

   ISBN 1-882114-43-4

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; there being no Invariant Section, with the Front-Cover
     Texts being ``A GNU Manual'', and with the Back-Cover Texts as in
     (a) below.  A copy of the license is included in the section
     entitled ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Determining-the-Element"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Digression-concerning-error.html#Digression-concerning-error">Digression concerning error</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Understanding-current_002dkill.html#Understanding-current_002dkill">Understanding current-kill</a>

</div>

<h5 class="unnumberedsubsubsec">Determining the Element</h5>

   <p>Among other actions, the else-part of the <code>if</code> expression sets
the value of <code>kill-ring-yank-pointer</code> to
<code>ARGth-kill-element</code> when the kill ring has something in it and
the value of <code>do-not-move</code> is <code>nil</code>.

   <p>The code looks like this:

<pre class="smallexample">     (nthcdr (mod (- n (length kill-ring-yank-pointer))
                  (length kill-ring))
             kill-ring)))
</pre>
   <p>This needs some examination.  Unless it is not supposed to move the
pointer, the <code>current-kill</code> function changes where
<code>kill-ring-yank-pointer</code> points. 
That is what the
<code>(setq&nbsp;kill-ring-yank-pointer&nbsp;ARGth-kill-element))</code><!-- /@w -->
expression does.  Also, clearly, <code>ARGth-kill-element</code> is being
set to be equal to some <span class="sc">cdr</span> of the kill ring, using the
<code>nthcdr</code> function that is described in an earlier section. 
(See <a href="copy_002dregion_002das_002dkill.html#copy_002dregion_002das_002dkill">copy-region-as-kill</a>.)  How does it do this?

   <p>As we have seen before (see <a href="nthcdr.html#nthcdr">nthcdr</a>), the <code>nthcdr</code> function
works by repeatedly taking the <span class="sc">cdr</span> of a list&mdash;it takes the
<span class="sc">cdr</span> of the <span class="sc">cdr</span> of the <span class="sc">cdr</span> <small class="dots">...</small>

   <p>The two following expressions produce the same result:

<pre class="smallexample">     (setq kill-ring-yank-pointer (cdr kill-ring))
     
     (setq kill-ring-yank-pointer (nthcdr 1 kill-ring))
</pre>
   <p>However, the <code>nthcdr</code> expression is more complicated.  It uses
the <code>mod</code> function to determine which <span class="sc">cdr</span> to select.

   <p>(You will remember to look at inner functions first; indeed, we will
have to go inside the <code>mod</code>.)

   <p>The <code>mod</code> function returns the value of its first argument modulo
the second; that is to say, it returns the remainder after dividing
the first argument by the second.  The value returned has the same
sign as the second argument.

   <p>Thus,

<pre class="smallexample">     (mod 12 4)
       &rArr; 0  ;; <span class="roman">because there is no remainder</span>
     (mod 13 4)
       &rArr; 1
</pre>
   <p>In this case, the first argument is often smaller than the second. 
That is fine.

<pre class="smallexample">     (mod 0 4)
       &rArr; 0
     (mod 1 4)
       &rArr; 1
</pre>
   <p>We can guess what the <code>-</code> function does.  It is like <code>+</code> but
subtracts instead of adds; the <code>-</code> function subtracts its second
argument from its first.  Also, we already know what the <code>length</code>
function does (see <a href="length.html#length">length</a>).  It returns the length of a list.

   <p>And <code>n</code> is the name of the required argument to the
<code>current-kill</code> function.

   <p>So when the first argument to <code>nthcdr</code> is zero, the <code>nthcdr</code>
expression returns the whole list, as you can see by evaluating the
following:

<pre class="smallexample">     ;; kill-ring-yank-pointer <span class="roman">and</span> kill-ring <span class="roman">have a length of four</span>
     ;; <span class="roman">and</span> (mod (- 0 4) 4) &rArr; 0
     (nthcdr (mod (- 0 4) 4)
             '("fourth line of text"
               "third line"
               "second piece of text"
               "first some text"))
</pre>
   <p>When the first argument to the <code>current-kill</code> function is one,
the <code>nthcdr</code> expression returns the list without its first
element.

<pre class="smallexample">     (nthcdr (mod (- 1 4) 4)
             '("fourth line of text"
               "third line"
               "second piece of text"
               "first some text"))
</pre>
   <p><a name="index-g_t_0040samp_007bglobal-variable_007d-defined-369"></a><a name="index-g_t_0040samp_007bvariable_002c-global_007d_002c-defined-370"></a>Incidentally, both <code>kill-ring</code> and <code>kill-ring-yank-pointer</code>
are <dfn>global variables</dfn>.  That means that any expression in Emacs
Lisp can access them.  They are not like the local variables set by
<code>let</code> or like the symbols in an argument list. 
Local variables can only be accessed
within the <code>let</code> that defines them or the function that specifies
them in an argument list (and within expressions called by them).

<!-- texi2dvi fails when the name of the section is within ifnottex ... -->
   <p>(See <a href="Prevent-confusion.html#Prevent-confusion"><code>let</code> Prevents Confusion</a>, and
<a href="defun.html#defun">The <code>defun</code> Macro</a>.)

   </body></html>

