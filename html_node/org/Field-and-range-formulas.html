<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Field and range formulas - The Org Manual</title>
<!--
This manual is for Org version 9.1.9.

Copyright (C) 2004--2019 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Field-and-range-formulas"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Column-formulas.html#Column-formulas">Column formulas</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Durations-and-time-values.html#Durations-and-time-values">Durations and time values</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="The-spreadsheet.html#The-spreadsheet">The spreadsheet</a>

</div>

<h4 class="subsection">3.5.5 Field and range formulas</h4>

<p><a name="index-field-formula-368"></a><a name="index-range-formula-369"></a><a name="index-formula_002c-for-individual-table-field-370"></a><a name="index-formula_002c-for-range-of-fields-371"></a>
To assign a formula to a particular field, type it directly into the field,
preceded by &lsquo;<samp><span class="samp">:=</span></samp>&rsquo;, for example &lsquo;<samp><span class="samp">:=vsum(@II..III)</span></samp>&rsquo;.  When you press
&lt;TAB&gt; or &lt;RET&gt; or <kbd>C-c C-c</kbd> with the cursor still in the field,
the formula will be stored as the formula for this field, evaluated, and the
current field will be replaced with the result.

   <p><a name="index-g_t_0040code_007b_0023_002bTBLFM_007d-372"></a>Formulas are stored in a special line starting with <code>#+TBLFM:</code> directly
below the table.  If you type the equation in the 4th field of the 3rd data
line in the table, the formula will look like &lsquo;<samp><span class="samp">@3$4=$1+$2</span></samp>&rsquo;.  When
inserting/deleting/swapping columns and rows with the appropriate commands,
<i>absolute references</i> (but not relative ones) in stored formulas are
modified in order to still reference the same field.  To avoid this, in
particular in range references, anchor ranges at the table borders (using
<code>@&lt;</code>, <code>@&gt;</code>, <code>$&lt;</code>, <code>$&gt;</code>), or at hlines using the
<code>@I</code> notation.  Automatic adaptation of field references does of course
not happen if you edit the table structure with normal editing
commands&mdash;then you must fix the equations yourself.

   <p>Instead of typing an equation into the field, you may also use the following
command

     
<a name="index-C_002du-C_002dc-_003d-373"></a>
<a name="index-org_002dtable_002deval_002dformula-374"></a>
<dl><dt><kbd>C-u C-c = &nbsp;&nbsp;&nbsp;&nbsp;(</kbd><code>org-table-eval-formula</code><kbd>)</kbd><dd>
Install a new formula for the current field.  The command prompts for a
formula with default taken from the <code>#+TBLFM:</code> line, applies
it to the current field, and stores it. 
</dl>

   <p>The left-hand side of a formula can also be a special expression in order to
assign the formula to a number of different fields.  There is no keyboard
shortcut to enter such range formulas.  To add them, use the formula editor
(see <a href="Editing-and-debugging-formulas.html#Editing-and-debugging-formulas">Editing and debugging formulas</a>) or edit the <code>#+TBLFM:</code> line
directly.

     <dl>
<dt><code>$2=</code><dd>Column formula, valid for the entire column.  This is so common that Org
treats these formulas in a special way, see <a href="Column-formulas.html#Column-formulas">Column formulas</a>. 
<br><dt><code>@3=</code><dd>Row formula, applies to all fields in the specified row.  <code>@&gt;=</code> means
the last row. 
<br><dt><code>@1$2..@4$3=</code><dd>Range formula, applies to all fields in the given rectangular range.  This
can also be used to assign a formula to some but not all fields in a row. 
<br><dt><code>$name=</code><dd>Named field, see <a href="Advanced-features.html#Advanced-features">Advanced features</a>. 
</dl>

   </body></html>

