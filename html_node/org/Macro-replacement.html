<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Macro replacement - The Org Manual</title>
<!--
This manual is for Org version 9.1.9.

Copyright (C) 2004--2019 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being ``A GNU Manual,'' and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Macro-replacement"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Comment-lines.html#Comment-lines">Comment lines</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Include-files.html#Include-files">Include files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Exporting.html#Exporting">Exporting</a>

</div>

<h3 class="section">12.5 Macro replacement</h3>

<p><a name="index-macro-replacement_002c-during-export-1672"></a><a name="index-g_t_0040code_007b_0023_002bMACRO_007d-1673"></a>
<a name="index-org_002dexport_002dglobal_002dmacros-1674"></a>Macros replace text snippets during export.  Macros are defined globally in
<code>org-export-global-macros</code>, or document-wise with the following syntax:

<pre class="example">     #+MACRO: name   replacement text $1, $2 are arguments
</pre>
   <p class="noindent">which can be referenced using
<code>{{{name(arg1, arg2)}}}</code><a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>.

   <p>Org recognizes macro references in following Org markup areas: paragraphs,
headlines, verse blocks, tables cells and lists.  Org also recognizes macro
references in keywords, such as <code>#+CAPTION</code>, <code>#+TITLE</code>,
<code>#+AUTHOR</code>, <code>#+DATE</code>, and for some back-end specific export
options.

   <p>Org comes with following pre-defined macros:

     <dl>
<dt><code>{{{title}}}</code><dt><code>{{{author}}}</code><dt><code>{{{email}}}</code><dd><a name="index-title_002c-macro-1675"></a><a name="index-author_002c-macro-1676"></a><a name="index-email_002c-macro-1677"></a>Org replaces these macro references with available information at the time of
export.

     <br><dt><code>{{{date}}}</code><dt><code>{{{date(</code><var>FORMAT</var><code>)}}}</code><dd><a name="index-date_002c-macro-1678"></a>This macro refers to the <code>#+DATE</code> keyword.  <var>FORMAT</var> is an optional
argument to the <code>{{{date}}}</code> macro that will be used only if
<code>#+DATE</code> is a single timestamp.  <var>FORMAT</var> should be a format string
understood by <code>format-time-string</code>.

     <br><dt><code>{{{time(</code><var>FORMAT</var><code>)}}}</code><dt><code>{{{modification-time(</code><var>FORMAT</var><code>, </code><var>VC</var><code>)}}}</code><dd><a name="index-time_002c-macro-1679"></a><a name="index-modification-time_002c-macro-1680"></a>These macros refer to the document's date and time of export and date and
time of modification.  <var>FORMAT</var> is a string understood by
<code>format-time-string</code>.  If the second argument to the
<code>modification-time</code> macro is non-<code>nil</code>, Org uses <samp><span class="file">vc.el</span></samp> to
retrieve the document's modification time from the version control
system.  Otherwise Org reads the file attributes.

     <br><dt><code>{{{input-file}}}</code><dd><a name="index-input-file_002c-macro-1681"></a>This macro refers to the filename of the exported file.

     <br><dt><code>{{{property(</code><var>PROPERTY-NAME</var><code>)}}}</code><dt><code>{{{property(</code><var>PROPERTY-NAME</var><code>,</code><var>SEARCH-OPTION</var><code>)}}}</code><dd><a name="index-property_002c-macro-1682"></a>This macro returns the value of property <var>PROPERTY-NAME</var> in the current
entry.  If <var>SEARCH-OPTION</var> (see <a href="Search-options.html#Search-options">Search options</a>) refers to a remote
entry, that will be used instead.

     <br><dt><code>{{{n}}}</code><dt><code>{{{n(</code><var>NAME</var><code>)}}}</code><dt><code>{{{n(</code><var>NAME</var><code>,</code><var>ACTION</var><code>)}}}</code><dd><a name="index-n_002c-macro-1683"></a><a name="index-counter_002c-macro-1684"></a>This macro implements custom counters by returning the number of times the
macro has been expanded so far while exporting the buffer.  You can create
more than one counter using different <var>NAME</var> values.  If <var>ACTION</var> is
<code>-</code>, previous value of the counter is held, i.e. the specified counter
is not incremented.  If the value is a number, the specified counter is set
to that value.  If it is any other non-empty string, the specified counter is
reset to 1.  You may leave <var>NAME</var> empty to reset the default counter. 
</dl>

   <p>The surrounding brackets can be made invisible by setting
<code>org-hide-macro-markers</code> non-<code>nil</code>.

   <p>Org expands macros at the very beginning of the export process.

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> Since commas separate the
arguments, commas within arguments have to be escaped with the backslash
character.  So only those backslash characters before a comma need escaping
with another backslash character.</p>

   <hr></div>

   </body></html>

