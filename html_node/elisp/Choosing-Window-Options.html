<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Choosing Window Options - GNU Emacs Lisp Reference Manual</title>
<!--
This is the `GNU Emacs Lisp Reference Manual'
corresponding to Emacs version 26.2.

Copyright (C) 1990--1996, 1998--2019 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``GNU General Public
     License,'' with the Front-Cover Texts being ``A GNU Manual,'' and
     with the Back-Cover Texts as in (a) below.  A copy of the license
     is included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Choosing-Window-Options"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Precedence-of-Action-Functions.html#Precedence-of-Action-Functions">Precedence of Action Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Buffer-Display-Action-Alists.html#Buffer-Display-Action-Alists">Buffer Display Action Alists</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Displaying-Buffers.html#Displaying-Buffers">Displaying Buffers</a>

</div>

<h4 class="subsection">28.13.4 Additional Options for Displaying Buffers</h4>

<p>The behavior of buffer display actions (see <a href="Choosing-Window.html#Choosing-Window">Choosing Window</a>) can
be further modified by the following user options.

<div class="defun">
&mdash; User Option: <b>pop-up-windows</b><var><a name="index-pop_002dup_002dwindows-2826"></a></var><br>
<blockquote><p>If the value of this variable is non-<code>nil</code>, <code>display-buffer</code>
is allowed to split an existing window to make a new window for
displaying in.  This is the default.

        <p>This variable is provided for backward compatibility only.  It is
obeyed by <code>display-buffer</code> via a special mechanism in
<code>display-buffer-fallback-action</code>, which calls the action function
<code>display-buffer-pop-up-window</code> (see <a href="Buffer-Display-Action-Functions.html#Buffer-Display-Action-Functions">Buffer Display Action Functions</a>) when the value of this option is non-<code>nil</code>.  It is
not consulted by <code>display-buffer-pop-up-window</code> itself, which the
user may specify directly in <code>display-buffer-alist</code> etc. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>split-window-preferred-function</b><var><a name="index-split_002dwindow_002dpreferred_002dfunction-2827"></a></var><br>
<blockquote><p>This variable specifies a function for splitting a window, in order to
make a new window for displaying a buffer.  It is used by the
<code>display-buffer-pop-up-window</code> action function to actually split
the window.

        <p>The value must be a function that takes one argument, a window, and
returns either a new window (which will be used to display the desired
buffer) or <code>nil</code> (which means the splitting failed).  The default
value is <code>split-window-sensibly</code>, which is documented next. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>split-window-sensibly</b><var> &amp;optional window<a name="index-split_002dwindow_002dsensibly-2828"></a></var><br>
<blockquote><p>This function tries to split <var>window</var> and return the newly created
window.  If <var>window</var> cannot be split, it returns <code>nil</code>.  If
<var>window</var> is omitted or <code>nil</code>, it defaults to the selected
window.

        <p>This function obeys the usual rules that determine when a window may
be split (see <a href="Splitting-Windows.html#Splitting-Windows">Splitting Windows</a>).  It first tries to split by
placing the new window below, subject to the restriction imposed by
<code>split-height-threshold</code> (see below), in addition to any other
restrictions.  If that fails, it tries to split by placing the new
window to the right, subject to <code>split-width-threshold</code> (see
below).  If that also fails, and the window is the only window on its
frame, this function again tries to split and place the new window
below, disregarding <code>split-height-threshold</code>.  If this fails as
well, this function gives up and returns <code>nil</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>split-height-threshold</b><var><a name="index-split_002dheight_002dthreshold-2829"></a></var><br>
<blockquote><p>This variable specifies whether <code>split-window-sensibly</code> is
allowed to split the window placing the new window below.  If it is an
integer, that means to split only if the original window has at least
that many lines.  If it is <code>nil</code>, that means not to split this
way. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>split-width-threshold</b><var><a name="index-split_002dwidth_002dthreshold-2830"></a></var><br>
<blockquote><p>This variable specifies whether <code>split-window-sensibly</code> is
allowed to split the window placing the new window to the right.  If
the value is an integer, that means to split only if the original
window has at least that many columns.  If the value is <code>nil</code>,
that means not to split this way. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>even-window-sizes</b><var><a name="index-even_002dwindow_002dsizes-2831"></a></var><br>
<blockquote><p>This variable, if non-<code>nil</code>, causes <code>display-buffer</code> to even
window sizes whenever it reuses an existing window, and that window is
adjacent to the selected one.

        <p>If its value is <code>width-only</code>, sizes are evened only if the reused
window is on the left or right of the selected one and the selected
window is wider than the reused one.  If its value is <code>height-only</code>
sizes are evened only if the reused window is above or beneath the
selected window and the selected window is higher than the reused one. 
Any other non-<code>nil</code> value means to even sizes in any of these cases
provided the selected window is larger than the reused one in the sense
of their combination. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>pop-up-frames</b><var><a name="index-pop_002dup_002dframes-2832"></a></var><br>
<blockquote><p>If the value of this variable is non-<code>nil</code>, that means
<code>display-buffer</code> may display buffers by making new frames.  The
default is <code>nil</code>.

        <p>A non-<code>nil</code> value also means that when <code>display-buffer</code> is
looking for a window already displaying <var>buffer-or-name</var>, it can
search any visible or iconified frame, not just the selected frame.

        <p>This variable is provided mainly for backward compatibility.  It is
obeyed by <code>display-buffer</code> via a special mechanism in
<code>display-buffer-fallback-action</code>, which calls the action function
<code>display-buffer-pop-up-frame</code> (see <a href="Buffer-Display-Action-Functions.html#Buffer-Display-Action-Functions">Buffer Display Action Functions</a>) if the value is non-<code>nil</code>.  (This is done before
attempting to split a window.)  This variable is not consulted by
<code>display-buffer-pop-up-frame</code> itself, which the user may specify
directly in <code>display-buffer-alist</code> etc. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>pop-up-frame-function</b><var><a name="index-pop_002dup_002dframe_002dfunction-2833"></a></var><br>
<blockquote><p>This variable specifies a function for creating a new frame, in order
to make a new window for displaying a buffer.  It is used by the
<code>display-buffer-pop-up-frame</code> action function.

        <p>The value should be a function that takes no arguments and returns a
frame, or <code>nil</code> if no frame could be created.  The default value
is a function that creates a frame using the parameters specified by
<code>pop-up-frame-alist</code> (see below). 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>pop-up-frame-alist</b><var><a name="index-pop_002dup_002dframe_002dalist-2834"></a></var><br>
<blockquote><p>This variable holds an alist of frame parameters (see <a href="Frame-Parameters.html#Frame-Parameters">Frame Parameters</a>), which is used by the function specified by
<code>pop-up-frame-function</code> to make a new frame.  The default is
<code>nil</code>.

        <p>This option is provided for backward compatibility only.  Note, that
when <code>display-buffer-pop-up-frame</code> calls the function specified
by <code>pop-up-frame-function</code>, it prepends the value of all
<code>pop-up-frame-parameters</code> action alist entries to
<code>pop-up-frame-alist</code> so that the values specified by the action
alist entry effectively override any corresponding values of
<code>pop-up-frame-alist</code>.

        <p>Hence, users should set up a <code>pop-up-frame-parameters</code> action
alist entry in <code>display-buffer-alist</code> instead of customizing
<code>pop-up-frame-alist</code>.  Only this will guarantee that the value of
a parameter specified by the user overrides the value of that
parameter specified by the caller of <code>display-buffer</code>. 
</p></blockquote></div>

   <p>Many efforts in the design of <code>display-buffer</code> have been given
to maintain compatibility with code that uses older options like
<code>pop-up-windows</code>, <code>pop-up-frames</code>,
<code>pop-up-frame-alist</code>, <code>same-window-buffer-names</code> and
<code>same-window-regexps</code>.  Lisp Programs and users should refrain
from using these options.  Above we already warned against customizing
<code>pop-up-frame-alist</code>.  Here we describe how to convert the
remaining options to use display actions instead.

     <dl>
<dt><code>pop-up-windows</code><dd><a name="index-pop_002dup_002dwindows_0040r_007b_002c-replacement-for_007d-2835"></a>This variable is <code>t</code> by default.  Instead of customizing it to
<code>nil</code> and thus telling <code>display-buffer</code> what not to do, it's
much better to list in <code>display-buffer-base-action</code> the action
functions it should try instead as, for example:

     <pre class="example">          (customize-set-variable
           'display-buffer-base-action
           '((display-buffer-reuse-window display-buffer-same-window
              display-buffer-in-previous-window
              display-buffer-use-some-window)))
</pre>
     <br><dt><code>pop-up-frames</code><dd><a name="index-pop_002dup_002dframes_0040r_007b_002c-replacement-for_007d-2836"></a>Instead of customizing this variable to <code>t</code>, customize
<code>display-buffer-base-action</code>, for example, as follows:

     <pre class="example">          (customize-set-variable
           'display-buffer-base-action
           '((display-buffer-reuse-window display-buffer-pop-up-frame)
             (reusable-frames . 0)))
</pre>
     <br><dt><code>same-window-buffer-names</code><dt><code>same-window-regexps</code><dd><a name="index-same_002dwindow_002dbuffer_002dnames_0040r_007b_002c-replacement-for_007d-2837"></a><a name="index-same_002dwindow_002dregexps_0040r_007b_002c-replacement-for_007d-2838"></a>Instead of adding a buffer name or a regular expression to one of
these options use a <code>display-buffer-alist</code> entry for that buffer
specifying the action function <code>display-buffer-same-window</code>.

     <pre class="example">          (customize-set-variable
           'display-buffer-alist
           (cons '("\\*foo\\*" (display-buffer-same-window))
                  display-buffer-alist))
</pre>
     </dl>

   </body></html>

