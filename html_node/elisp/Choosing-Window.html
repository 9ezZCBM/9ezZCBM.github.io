<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Choosing Window - GNU Emacs Lisp Reference Manual</title>
<!--
This is the `GNU Emacs Lisp Reference Manual'
corresponding to Emacs version 26.2.

Copyright (C) 1990--1996, 1998--2019 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``GNU General Public
     License,'' with the Front-Cover Texts being ``A GNU Manual,'' and
     with the Back-Cover Texts as in (a) below.  A copy of the license
     is included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Choosing-Window"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Buffer-Display-Action-Functions.html#Buffer-Display-Action-Functions">Buffer Display Action Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Displaying-Buffers.html#Displaying-Buffers">Displaying Buffers</a>

</div>

<h4 class="subsection">28.13.1 Choosing a Window for Displaying a Buffer</h4>

<p>The command <code>display-buffer</code> flexibly chooses a window for
display, and displays a specified buffer in that window.  It can be
called interactively, via the key binding <kbd>C-x 4 C-o</kbd>.  It is also
used as a subroutine by many functions and commands, including
<code>switch-to-buffer</code> and <code>pop-to-buffer</code> (see <a href="Switching-Buffers.html#Switching-Buffers">Switching Buffers</a>).

   <p><a name="index-buffer-display-display-action-2786"></a><a name="index-display-action-2787"></a>  This command performs several complex steps to find a window to
display in.  These steps are described by means of <dfn>display
actions</dfn>, which have the form <code>(</code><var>functions</var><code> . </code><var>alist</var><code>)</code>. 
Here, <var>functions</var> is either a single function or a list of
functions, referred to as &ldquo;action functions&rdquo; (see <a href="Buffer-Display-Action-Functions.html#Buffer-Display-Action-Functions">Buffer Display Action Functions</a>); and <var>alist</var> is an association list, referred
to as &ldquo;action alist&rdquo; (see <a href="Buffer-Display-Action-Alists.html#Buffer-Display-Action-Alists">Buffer Display Action Alists</a>). 
See <a href="The-Zen-of-Buffer-Display.html#The-Zen-of-Buffer-Display">The Zen of Buffer Display</a>, for samples of display actions.

   <p>An action function accepts two arguments: the buffer to display and
an action alist.  It attempts to display the buffer in some window,
picking or creating a window according to its own criteria.  If
successful, it returns the window; otherwise, it returns <code>nil</code>.

   <p><code>display-buffer</code> works by combining display actions from
several sources, and calling the action functions in turn, until one
of them manages to display the buffer and returns a non-<code>nil</code>
value.

<div class="defun">
&mdash; Command: <b>display-buffer</b><var> buffer-or-name &amp;optional action frame<a name="index-display_002dbuffer-2788"></a></var><br>
<blockquote><p>This command makes <var>buffer-or-name</var> appear in some window, without
selecting the window or making the buffer current.  The argument
<var>buffer-or-name</var> must be a buffer or the name of an existing
buffer.  The return value is the window chosen to display the buffer,
or <code>nil</code> if no suitable window was found.

        <p>The optional argument <var>action</var>, if non-<code>nil</code>, should normally
be a display action (described above).  <code>display-buffer</code> builds a
list of action functions and an action alist, by consolidating display
actions from the following sources (in order of their precedence,
from highest to lowest):

          <ul>
<li>The variable <code>display-buffer-overriding-action</code>.

          <li>The user option <code>display-buffer-alist</code>.

          <li>The <var>action</var> argument.

          <li>The user option <code>display-buffer-base-action</code>.

          <li>The constant <code>display-buffer-fallback-action</code>. 
</ul>

     <p class="noindent">In practice this means that <code>display-buffer</code> builds a list of all
action functions specified by these display actions.  The first
element of this list is the first action function specified by
<code>display-buffer-overriding-action</code>, if any.  Its last element is
<code>display-buffer-pop-up-frame</code>&mdash;the last action function
specified by <code>display-buffer-fallback-action</code>.  Duplicates are
not removed from this list&mdash;hence one and the same action function
may be called multiple times during one call of <code>display-buffer</code>.

        <p><code>display-buffer</code> calls the action functions specified by this
list in turn, passing the buffer as the first argument and the
combined action alist as the second argument, until one of the
functions returns non-<code>nil</code>.  See <a href="Precedence-of-Action-Functions.html#Precedence-of-Action-Functions">Precedence of Action Functions</a>, for examples how display actions specified by different
sources are processed by <code>display-buffer</code>.

        <p>Note that the second argument is always the list of <em>all</em> action
alist entries specified by the sources named above.  Hence, the first
element of that list is the first action alist entry specified by
<code>display-buffer-overriding-action</code>, if any.  Its last element is
the last alist entry of <code>display-buffer-base-action</code>, if any (the
action alist of <code>display-buffer-fallback-action</code> is empty).

        <p>Note also, that the combined action alist may contain duplicate
entries and entries for the same key with different values.  As a
rule, action functions always use the first association of a key they
find.  Hence, the association an action function uses is not
necessarily the association provided by the display action that
specified that action function,

        <p>The argument <var>action</var> can also have a non-<code>nil</code>, non-list
value.  This has the special meaning that the buffer should be
displayed in a window other than the selected one, even if the
selected window is already displaying it.  If called interactively
with a prefix argument, <var>action</var> is <code>t</code>.  Lisp programs
should always supply a list value.

        <p>The optional argument <var>frame</var>, if non-<code>nil</code>, specifies which
frames to check when deciding whether the buffer is already displayed. 
It is equivalent to adding an element <code>(reusable-frames&nbsp;.&nbsp;</code><var>frame</var><code>)</code><!-- /@w --> to the action alist of <var>action</var> (see <a href="Buffer-Display-Action-Alists.html#Buffer-Display-Action-Alists">Buffer Display Action Alists</a>).  The <var>frame</var> argument is provided for
compatibility reasons, Lisp programs should not use it. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>display-buffer-overriding-action</b><var><a name="index-display_002dbuffer_002doverriding_002daction-2789"></a></var><br>
<blockquote><p>The value of this variable should be a display action, which is
treated with the highest priority by <code>display-buffer</code>.  The
default value is an empty display action, i.e., <code>(nil&nbsp;.&nbsp;nil)</code><!-- /@w -->. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>display-buffer-alist</b><var><a name="index-display_002dbuffer_002dalist-2790"></a></var><br>
<blockquote><p>The value of this option is an alist mapping conditions to display
actions.  Each condition may be either a regular expression matching a
buffer name or a function that takes two arguments: a buffer name and
the <var>action</var> argument passed to <code>display-buffer</code>.  If either
the name of the buffer passed to <code>display-buffer</code> matches a
regular expression in this alist, or the function specified by a
condition returns non-<code>nil</code>, then <code>display-buffer</code> uses the
corresponding display action to display the buffer. 
</p></blockquote></div>

<div class="defun">
&mdash; User Option: <b>display-buffer-base-action</b><var><a name="index-display_002dbuffer_002dbase_002daction-2791"></a></var><br>
<blockquote><p>The value of this option should be a display action.  This option can
be used to define a standard display action for calls to
<code>display-buffer</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Constant: <b>display-buffer-fallback-action</b><var><a name="index-display_002dbuffer_002dfallback_002daction-2792"></a></var><br>
<blockquote><p>This display action specifies the fallback behavior for
<code>display-buffer</code> if no other display actions are given. 
</p></blockquote></div>

   </body></html>

