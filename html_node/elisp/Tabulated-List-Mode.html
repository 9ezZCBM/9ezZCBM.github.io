<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Tabulated List Mode - GNU Emacs Lisp Reference Manual</title>
<!--
This is the `GNU Emacs Lisp Reference Manual'
corresponding to Emacs version 26.2.

Copyright (C) 1990--1996, 1998--2019 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``GNU General Public
     License,'' with the Front-Cover Texts being ``A GNU Manual,'' and
     with the Back-Cover Texts as in (a) below.  A copy of the license
     is included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Tabulated-List-Mode"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Generic-Modes.html#Generic-Modes">Generic Modes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Mode-Hooks.html#Mode-Hooks">Mode Hooks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Major-Modes.html#Major-Modes">Major Modes</a>

</div>

<h4 class="subsection">23.2.7 Tabulated List mode</h4>

<p><a name="index-Tabulated-List-mode-2049"></a>
  Tabulated List mode is a major mode for displaying tabulated data,
i.e., data consisting of <dfn>entries</dfn>, each entry occupying one row of
text with its contents divided into columns.  Tabulated List mode
provides facilities for pretty-printing rows and columns, and sorting
the rows according to the values in each column.  It is derived from
Special mode (see <a href="Basic-Major-Modes.html#Basic-Major-Modes">Basic Major Modes</a>).

   <p>Tabulated List mode is intended to be used as a parent mode by a more
specialized major mode.  Examples include Process Menu mode
(see <a href="Process-Information.html#Process-Information">Process Information</a>) and Package Menu mode (see <a href="../emacs/Package-Menu.html#Package-Menu">Package Menu</a>).

   <p><a name="index-tabulated_002dlist_002dmode-2050"></a>  Such a derived mode should use <code>define-derived-mode</code> in the usual
way, specifying <code>tabulated-list-mode</code> as the second argument
(see <a href="Derived-Modes.html#Derived-Modes">Derived Modes</a>).  The body of the <code>define-derived-mode</code>
form should specify the format of the tabulated data, by assigning
values to the variables documented below; optionally, it can then call
the function <code>tabulated-list-init-header</code>, which will populate a
header with the names of the columns.

   <p>The derived mode should also define a <dfn>listing command</dfn>.  This,
not the mode command, is what the user calls (e.g., <kbd>M-x
list-processes</kbd>).  The listing command should create or switch to a
buffer, turn on the derived mode, specify the tabulated data, and
finally call <code>tabulated-list-print</code> to populate the buffer.

<div class="defun">
&mdash; Variable: <b>tabulated-list-format</b><var><a name="index-tabulated_002dlist_002dformat-2051"></a></var><br>
<blockquote><p>This buffer-local variable specifies the format of the Tabulated List
data.  Its value should be a vector.  Each element of the vector
represents a data column, and should be a list <code>(</code><var>name</var>
<var>width</var> <var>sort</var><code>)</code>, where

          <ul>
<li><var>name</var> is the column's name (a string).

          <li><var>width</var> is the width to reserve for the column (an integer).  This
is meaningless for the last column, which runs to the end of each line.

          <li><var>sort</var> specifies how to sort entries by the column.  If <code>nil</code>,
the column cannot be used for sorting.  If <code>t</code>, the column is
sorted by comparing string values.  Otherwise, this should be a
predicate function for <code>sort</code> (see <a href="Rearrangement.html#Rearrangement">Rearrangement</a>), which
accepts two arguments with the same form as the elements of
<code>tabulated-list-entries</code> (see below). 
</ul>
        </p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>tabulated-list-entries</b><var><a name="index-tabulated_002dlist_002dentries-2052"></a></var><br>
<blockquote><p>This buffer-local variable specifies the entries displayed in the
Tabulated List buffer.  Its value should be either a list, or a
function.

        <p>If the value is a list, each list element corresponds to one entry, and
should have the form <code>(</code><var>id</var><code>&nbsp;</code><var>contents</var><code>)</code><!-- /@w -->, where

          <ul>
<li><var>id</var> is either <code>nil</code>, or a Lisp object that identifies the
entry.  If the latter, the cursor stays on the same entry when
re-sorting entries.  Comparison is done with <code>equal</code>.

          <li><var>contents</var> is a vector with the same number of elements as
<code>tabulated-list-format</code>.  Each vector element is either a string,
which is inserted into the buffer as-is, or a list <code>(</code><var>label</var><code>
. </code><var>properties</var><code>)</code>, which means to insert a text button by calling
<code>insert-text-button</code> with <var>label</var> and <var>properties</var> as
arguments (see <a href="Making-Buttons.html#Making-Buttons">Making Buttons</a>).

          <p>There should be no newlines in any of these strings. 
</ul>

        <p>Otherwise, the value should be a function which returns a list of the
above form when called with no arguments. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>tabulated-list-revert-hook</b><var><a name="index-tabulated_002dlist_002drevert_002dhook-2053"></a></var><br>
<blockquote><p>This normal hook is run prior to reverting a Tabulated List buffer.  A
derived mode can add a function to this hook to recompute
<code>tabulated-list-entries</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>tabulated-list-printer</b><var><a name="index-tabulated_002dlist_002dprinter-2054"></a></var><br>
<blockquote><p>The value of this variable is the function called to insert an entry at
point, including its terminating newline.  The function should accept
two arguments, <var>id</var> and <var>contents</var>, having the same meanings as
in <code>tabulated-list-entries</code>.  The default value is a function which
inserts an entry in a straightforward way; a mode which uses Tabulated
List mode in a more complex way can specify another function. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>tabulated-list-sort-key</b><var><a name="index-tabulated_002dlist_002dsort_002dkey-2055"></a></var><br>
<blockquote><p>The value of this variable specifies the current sort key for the
Tabulated List buffer.  If it is <code>nil</code>, no sorting is done. 
Otherwise, it should have the form <code>(</code><var>name</var><code> . </code><var>flip</var><code>)</code>,
where <var>name</var> is a string matching one of the column names in
<code>tabulated-list-format</code>, and <var>flip</var>, if non-<code>nil</code>, means
to invert the sort order. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>tabulated-list-init-header</b><var><a name="index-tabulated_002dlist_002dinit_002dheader-2056"></a></var><br>
<blockquote><p>This function computes and sets <code>header-line-format</code> for the
Tabulated List buffer (see <a href="Header-Lines.html#Header-Lines">Header Lines</a>), and assigns a keymap to
the header line to allow sorting entries by clicking on column headers.

        <p>Modes derived from Tabulated List mode should call this after setting
the above variables (in particular, only after setting
<code>tabulated-list-format</code>). 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>tabulated-list-print</b><var> &amp;optional remember-pos update<a name="index-tabulated_002dlist_002dprint-2057"></a></var><br>
<blockquote><p>This function populates the current buffer with entries.  It should be
called by the listing command.  It erases the buffer, sorts the entries
specified by <code>tabulated-list-entries</code> according to
<code>tabulated-list-sort-key</code>, then calls the function specified by
<code>tabulated-list-printer</code> to insert each entry.

        <p>If the optional argument <var>remember-pos</var> is non-<code>nil</code>, this
function looks for the <var>id</var> element on the current line, if any, and
tries to move to that entry after all the entries are (re)inserted.

        <p>If the optional argument <var>update</var> is non-<code>nil</code>, this function
will only erase or add entries that have changed since the last print. 
This is several times faster if most entries haven't changed since the
last time this function was called.  The only difference in outcome is
that tags placed via <code>tabulated-list-put-tag</code> will not be removed
from entries that haven't changed (normally all tags are removed). 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>tabulated-list-delete-entry</b><var><a name="index-tabulated_002dlist_002ddelete_002dentry-2058"></a></var><br>
<blockquote><p>This function deletes the entry at point.

        <p>It returns a list <code>(</code><var>id</var> <var>cols</var><code>)</code>, where <var>id</var> is the
ID of the deleted entry and <var>cols</var> is a vector of its column
descriptors.  It moves point to the beginning of the current line.  It
returns <code>nil</code> if there is no entry at point.

        <p>Note that this function only changes the buffer contents; it does not
alter <code>tabulated-list-entries</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>tabulated-list-get-id</b><var> &amp;optional pos<a name="index-tabulated_002dlist_002dget_002did-2059"></a></var><br>
<blockquote><p>This <code>defsubst</code> returns the ID object from
<code>tabulated-list-entries</code> (if that is a list) or from the list
returned by <code>tabulated-list-entries</code> (if it is a function).  If
omitted or <code>nil</code>, <var>pos</var> defaults to point. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>tabulated-list-get-entry</b><var> &amp;optional pos<a name="index-tabulated_002dlist_002dget_002dentry-2060"></a></var><br>
<blockquote><p>This <code>defsubst</code> returns the entry object from
<code>tabulated-list-entries</code> (if that is a list) or from the list
returned by <code>tabulated-list-entries</code> (if it is a function).  This
will be a vector for the ID at <var>pos</var>.  If there is no entry at
<var>pos</var>, then the function returns <code>nil</code>. 
</p></blockquote></div>

   <p><a name="index-tabulated_002dlist_002duse_002dheader_002dline-2061"></a>

<div class="defun">
&mdash; Function: <b>tabulated-list-header-overlay-p</b><var> &amp;optional POS<a name="index-tabulated_002dlist_002dheader_002doverlay_002dp-2062"></a></var><br>
<blockquote><p>This <code>defsubst</code> returns non-nil if there is a fake header at
<var>pos</var>.  A fake header is used if
<code>tabulated-list-use-header-line</code> is <code>nil</code> to put the column
names at the beginning of the buffer.  If omitted or <code>nil</code>,
<var>pos</var> defaults to <code>point-min</code>. 
</p></blockquote></div>

   <p><a name="index-tabulated_002dlist_002dpadding-2063"></a>

<div class="defun">
&mdash; Function: <b>tabulated-list-put-tag</b><var> tag &amp;optional advance<a name="index-tabulated_002dlist_002dput_002dtag-2064"></a></var><br>
<blockquote><p>This function puts <var>tag</var> in the padding area of the current line. 
The padding area can be empty space at the beginning of the line, the
width of which is governed by <code>tabulated-list-padding</code>. 
<var>tag</var> should be a string, with a length less than or equal to
<code>tabulated-list-padding</code>.  If <var>advance</var> is non-nil, this
function advances point by one line. 
</p></blockquote></div>

<div class="defun">
&mdash; Function: <b>tabulated-list-set-col</b><var> col desc &amp;optional change-entry-data<a name="index-tabulated_002dlist_002dset_002dcol-2065"></a></var><br>
<blockquote><p>This function changes the tabulated list entry at point, setting
<var>col</var> to <var>desc</var>.  <var>col</var> is the column number to change, or
the name of the column to change.  <var>desc</var> is the new column
descriptor, which is inserted via <code>tabulated-list-print-col</code>.

        <p>If <var>change-entry-data</var> is non-nil, this function modifies the
underlying data (usually the column descriptor in the list
<code>tabulated-list-entries</code>) by setting the column descriptor of the
vector to <code>desc</code>. 
</p></blockquote></div>

   </body></html>

