<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Interactive Shell - GNU Emacs Manual</title>
<!--
This is the `GNU Emacs Manual',
updated for Emacs version 26.2.

Copyright (C) 1985--1987, 1993--2019 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``The GNU
     Manifesto,'' ``Distribution'' and ``GNU GENERAL PUBLIC LICENSE,''
     with the Front-Cover Texts being ``A GNU Manual,'' and with the
     Back-Cover Texts as in (a) below.  A copy of the license is
     included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Interactive-Shell"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Shell-Mode.html#Shell-Mode">Shell Mode</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Single-Shell.html#Single-Shell">Single Shell</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Shell.html#Shell">Shell</a>

</div>

<h3 class="section">38.2 Interactive Subshell</h3>

<p><a name="index-shell-4297"></a>  To run a subshell interactively, type <kbd>M-x shell</kbd>.  This creates
(or reuses) a buffer named <samp><span class="file">*shell*</span></samp>, and runs a shell subprocess
with input coming from and output going to that buffer.  That is to
say, any terminal output from the subshell goes into the buffer,
advancing point, and any terminal input for the subshell comes from
text in the buffer.  To give input to the subshell, go to the end of
the buffer and type the input, terminated by &lt;RET&gt;.

   <p>By default, when the subshell is invoked interactively, the
<samp><span class="file">*shell*</span></samp> buffer is displayed in a new window, unless the current
window already shows the <samp><span class="file">*shell*</span></samp> buffer.  This behavior can
be customized via <code>display-buffer-alist</code> (see <a href="Window-Choice.html#Window-Choice">Window Choice</a>).

   <p>While the subshell is waiting or running a command, you can switch
windows or buffers and perform other editing in Emacs.  Emacs inserts
the output from the subshell into the Shell buffer whenever it has
time to process it (e.g., while waiting for keyboard input).

   <p><a name="index-g_t_0040code_007bcomint_002dhighlight_002dinput_007d-face-4298"></a><a name="index-g_t_0040code_007bcomint_002dhighlight_002dprompt_007d-face-4299"></a>  In the Shell buffer, prompts are displayed with the face
<code>comint-highlight-prompt</code>, and submitted input lines are
displayed with the face <code>comint-highlight-input</code>.  This makes it
easier to distinguish input lines from the shell output. 
See <a href="Faces.html#Faces">Faces</a>.

   <p>To make multiple subshells, invoke <kbd>M-x shell</kbd> with a prefix
argument (e.g., <kbd>C-u M-x shell</kbd>).  Then the command will read a
buffer name, and create (or reuse) a subshell in that buffer.  You can
also rename the <samp><span class="file">*shell*</span></samp> buffer using <kbd>M-x rename-uniquely</kbd>,
then create a new <samp><span class="file">*shell*</span></samp> buffer using plain <kbd>M-x shell</kbd>. 
Subshells in different buffers run independently and in parallel.

   <p><a name="index-explicit_002dshell_002dfile_002dname-4300"></a><a name="index-environment-variables-for-subshells-4301"></a><a name="index-g_t_0040env_007bESHELL_007d-environment-variable-4302"></a><a name="index-g_t_0040env_007bSHELL_007d-environment-variable-4303"></a>  To specify the shell file name used by <kbd>M-x shell</kbd>, customize
the variable <code>explicit-shell-file-name</code>.  If this is <code>nil</code>
(the default), Emacs uses the environment variable <samp><span class="env">ESHELL</span></samp> if it
exists.  Otherwise, it usually uses the variable
<code>shell-file-name</code> (see <a href="Single-Shell.html#Single-Shell">Single Shell</a>); but if the default
directory is remote (see <a href="Remote-Files.html#Remote-Files">Remote Files</a>), it prompts you for the
shell file name.  See <a href="Minibuffer-File.html#Minibuffer-File">Minibuffer File</a>, for hints how to type remote
file names effectively.

   <p>Emacs sends the new shell the contents of the file
<samp><span class="file">~/.emacs_</span><var>shellname</var></samp> as input, if it exists, where
<var>shellname</var> is the name of the file that the shell was loaded
from.  For example, if you use bash, the file sent to it is
<samp><span class="file">~/.emacs_bash</span></samp>.  If this file is not found, Emacs tries with
<samp><span class="file">~/.emacs.d/init_</span><var>shellname</var><span class="file">.sh</span></samp>.

   <p>To specify a coding system for the shell, you can use the command
<kbd>C-x &lt;RET&gt; c</kbd> immediately before <kbd>M-x shell</kbd>.  You can
also change the coding system for a running subshell by typing
<kbd>C-x &lt;RET&gt; p</kbd> in the shell buffer.  See <a href="Communication-Coding.html#Communication-Coding">Communication Coding</a>.

   <p><a name="index-g_t_0040env_007bINSIDE_005fEMACS_007d-environment-variable-4304"></a>  Emacs sets the environment variable <samp><span class="env">INSIDE_EMACS</span></samp> in the
subshell to &lsquo;<samp><var>version</var><span class="samp">,comint</span></samp>&rsquo;, where <var>version</var> is the
Emacs version (e.g., &lsquo;<samp><span class="samp">24.1</span></samp>&rsquo;).  Programs can check this variable
to determine whether they are running inside an Emacs subshell.

   </body></html>

